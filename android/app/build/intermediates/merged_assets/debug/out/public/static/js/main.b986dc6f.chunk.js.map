{"version":3,"sources":["core/index.tsx","auth/AuthApi.tsx","auth/AuthProvider.tsx","auth/PrivateRoute.tsx","auth/Login.tsx","todo/GarmentApi.tsx","todo/GarmentProvider.tsx","todo/Garment.tsx","core/UseNetState.tsx","core/UseAppStatus.tsx","todo/GarmentList.tsx","todo/GarmentEdit.tsx","pages/Tab2.tsx","App.tsx","serviceWorker.ts","index.tsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.*/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.*/.entry/.js$/ include: /.entry/.js$/ exclude: /.system/.entry/.js$/ groupOptions: {} namespace object"],"names":["baseUrl","getLogger","tag","args","console","log","withLogs","promise","fnName","then","res","Promise","resolve","data","catch","err","reject","config","headers","authConfig","token","Authorization","authUrl","login","username","password","axios","post","initialState","isAuthenticated","isAuthenticating","authenticationError","pendingAuthentication","AuthContext","React","createContext","AuthProvider","children","useState","state","setState","useCallback","logout","a","Storage","clear","useEffect","canceled","authenticate","get","key","value","loginApi","Provider","PrivateRoute","Component","component","rest","useContext","render","props","to","pathname","Login","history","placeholder","onIonChange","e","detail","isOpen","message","onClick","Plugins","Network","garmentUrl","getGarments","getStatus","status","connected","forEach","garment","set","_id","JSON","stringify","id","name","material","inaltime","latime","descriere","createGarments","updateGarment","put","fetching","saving","reducer","type","payload","fetchingError","garments","error","savingError","index","findIndex","i","splice","GarmentContext","GarmentProvider","useReducer","dispatch","fetchGarments","trim","closeWebSocket","onMessage","ws","WebSocket","onopen","send","onclose","onerror","onmessage","messageEvent","parse","event","close","newWebSocket","saveGarment","savedGarment","Garment","onEdit","initState","connectionType","App","isActive","GarmentList","color","msg","disableInfiniteScroll","setDisableInfiniteScroll","displayed","setDisplayed","undefined","filter","setFilter","position","setPosition","networkStatus","setNetworkStatus","handler","addListener","handleNetStatusChange","remove","useNetwork","appState","setAppState","handleAppStateChange","getState","useAppState","$event","length","slice","target","complete","obj","className","slot","expand","fill","map","push","threshold","disabled","onIonInfinite","searchNext","loadingText","vertical","horizontal","icon","add","shirt","GarmentEdit","match","setText","setMaterial","setInaltime","setLatime","setDescriere","setGarment","routeId","params","find","editedGer","goBack","class","Tab2","searchName","setSearchName","indexOf","fullscreen","debounce","arrowBack","path","exact","Boolean","window","location","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister","webpackAsyncContext","req","__webpack_require__","o","Error","code","ids","keys","Object","module","exports"],"mappings":"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","file":"static/js/main.b986dc6f.chunk.js","sourcesContent":["export const baseUrl = 'localhost:3000';\r\n\r\nexport const getLogger: (tag: string) => (...args: any) => void =\r\n    tag => (...args) => console.log(tag, ...args);\r\n\r\nconst log = getLogger('api');\r\n\r\nexport interface ResponseProps<T> {\r\n    data: T;\r\n}\r\n\r\nexport function withLogs<T>(promise: Promise<ResponseProps<T>>, fnName: string): Promise<T> {\r\n    log(`${fnName} - started`);\r\n    return promise\r\n        .then(res => {\r\n            log(`${fnName} - succeeded`);\r\n            return Promise.resolve(res.data);\r\n        })\r\n        .catch(err => {\r\n            log(`${fnName} - failed`);\r\n            return Promise.reject(err);\r\n        });\r\n}\r\n\r\nexport const config = {\r\n    headers: {\r\n        'Content-Type': 'application/json'\r\n    }\r\n};\r\n\r\nexport const authConfig = (token?: string) => ({\r\n    headers: {\r\n        'Content-Type': 'application/json',\r\n        Authorization: `Bearer ${token}`,\r\n    }\r\n});","import axios from 'axios'\r\nimport { baseUrl, config, withLogs } from '../core';\r\n\r\nconst authUrl = `http://${baseUrl}/api/auth/login`;\r\n\r\nexport interface AuthProps {\r\n    token: string;\r\n}\r\n\r\nexport const login: (username?: string, password?: string) => Promise<AuthProps> = (username, password) => {\r\n    return withLogs(axios.post(authUrl, { username, password }, config), 'login');\r\n}\r\n\r\n","import PropTypes from 'prop-types';\r\nimport {getLogger} from '../core';\r\nimport React, {useCallback, useEffect, useState} from \"react\";\r\nimport {login as loginApi} from './AuthApi';\r\nimport { Storage } from \"@capacitor/core\";\r\n\r\nconst log = getLogger('AuthProvider');\r\n\r\ntype LoginFn = (username?: string, password?: string) => void;\r\ntype LogoutFn = () => void;\r\n\r\nexport interface AuthState {\r\n    authenticationError: Error | null;\r\n    isAuthenticated: boolean;\r\n    isAuthenticating: boolean;\r\n    login?: LoginFn;\r\n    logout?: LogoutFn;\r\n    pendingAuthentication?: boolean;\r\n    username?: string;\r\n    password?: string;\r\n    token: string;\r\n}\r\n\r\nconst initialState: AuthState = {\r\n    isAuthenticated: false,\r\n    isAuthenticating: false,\r\n    authenticationError: null,\r\n    pendingAuthentication: false,\r\n    token: '',\r\n};\r\n\r\nexport const AuthContext = React.createContext<AuthState>(initialState);\r\n\r\ninterface AuthProviderProps {\r\n    children: PropTypes.ReactNodeLike,\r\n}\r\n\r\n//TODO - partile de logout\r\nexport const AuthProvider: React.FC<AuthProviderProps> = ({children}) => {\r\n    const [state, setState] = useState<AuthState>(initialState);\r\n    const {isAuthenticated, isAuthenticating, authenticationError, pendingAuthentication, token} = state;\r\n    const login = useCallback<LoginFn>(loginCallback, []);\r\n    const logout = useCallback<LogoutFn>(logoutCallback, [])\r\n\r\n    useEffect(authenticationEffect, [pendingAuthentication]);\r\n    const value = {isAuthenticated, login, logout, isAuthenticating, authenticationError, token};\r\n    log('render');\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n\r\n    function loginCallback(username?: string, password?: string): void {\r\n        log('login');\r\n        setState({\r\n            ...state,\r\n            pendingAuthentication: true,\r\n            username,\r\n            password\r\n        });\r\n    }\r\n\r\n    function logoutCallback(): void {\r\n        log('logout');\r\n        setState({\r\n            ...state,\r\n            token: '',\r\n            isAuthenticated: false,\r\n        });\r\n\r\n        (async () => {\r\n            // await Storage.remove({ key: 'token' });\r\n            await Storage.clear();\r\n        })();\r\n    }\r\n\r\n    function authenticationEffect() {\r\n        let canceled = false;\r\n        authenticate();\r\n        return () => {\r\n            canceled = true;\r\n        }\r\n\r\n\r\n        async function authenticate() {\r\n            var token = await Storage.get({ key: 'token' });\r\n            if(token.value){\r\n                setState({\r\n                    ...state,\r\n                    token: token.value,\r\n                    pendingAuthentication: false,\r\n                    isAuthenticated: true,\r\n                    isAuthenticating: false,\r\n                });\r\n            }\r\n            if (!pendingAuthentication) {\r\n                log('authenticate, !pendingAuth, return');\r\n                return;\r\n            }\r\n            try {\r\n                log('auth...');\r\n                setState({\r\n                    ...state,\r\n                    isAuthenticating: true,\r\n                });\r\n                const {username, password} = state;\r\n                const {token} = await loginApi(username, password);\r\n                if (canceled) {\r\n                    return;\r\n                }\r\n                log('auth succeeded');\r\n\r\n                setState({\r\n                    ...state,\r\n                    token,\r\n                    pendingAuthentication: false,\r\n                    isAuthenticated: true,\r\n                    isAuthenticating: false,\r\n                });\r\n            } catch (err) {\r\n                if (canceled) {\r\n                    return;\r\n                }\r\n                log('auth failed');\r\n                setState({\r\n                    ...state,\r\n                    authenticationError: err,\r\n                    pendingAuthentication: false,\r\n                    isAuthenticating: false,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    // function logout() {\r\n    //     log('logout...');\r\n    //\r\n    //     setState({\r\n    //         ...state,\r\n    //         pendingAuthentication: false,\r\n    //         isAuthenticated: false,\r\n    //         isAuthenticating: false,\r\n    //     });\r\n    // }\r\n\r\n    // function saveTokenLocal() {\r\n    //     if (isAuthenticated)\r\n    //         (async () => {\r\n    //             const {Storage} = Plugins;\r\n    //             await Storage.set({\r\n    //                 key: 'token',\r\n    //                 value: token\r\n    //             });\r\n    //             console.log(\"token saved in local storage\");\r\n    //         })();\r\n    // }\r\n};","import {getLogger} from \"../core\";\r\nimport PropTypes from 'prop-types';\r\nimport React, {useContext} from \"react\";\r\nimport {AuthContext, AuthState} from \"./AuthProvider\";\r\nimport {Redirect, Route} from 'react-router-dom';\r\n\r\nconst log = getLogger('Login');\r\n\r\nexport interface PrivateRouteProps {\r\n    component: PropTypes.ReactNodeLike;\r\n    path: string;\r\n    exact?: boolean;\r\n}\r\n\r\nexport const PrivateRoute: React.FC<PrivateRouteProps> = ({component: Component, ...rest}) => {\r\n    const {isAuthenticated} = useContext<AuthState>(AuthContext);\r\n    log('render, isAuthenticated', isAuthenticated);\r\n    return (\r\n        <Route {...rest} render={props => {\r\n            if (isAuthenticated) {\r\n                // @ts-ignore\r\n                return <Component {...props} />;\r\n            }\r\n            return <Redirect to={{ pathname: '/login' }}/>\r\n        }}/>\r\n    );\r\n}","import {getLogger} from \"../core\";\r\nimport {RouteComponentProps} from \"react-router\";\r\nimport {Redirect} from 'react-router-dom';\r\nimport React, {useContext, useState} from \"react\";\r\nimport {AuthContext} from \"./AuthProvider\";\r\nimport {IonButton, IonContent, IonHeader, IonInput, IonLoading, IonPage, IonTitle, IonToolbar} from '@ionic/react';\r\n\r\n\r\nconst log = getLogger('Login');\r\n\r\ninterface LoginState {\r\n    username?: string;\r\n    password?: string;\r\n}\r\n\r\nexport const Login: React.FC<RouteComponentProps> = ({history}) => {\r\n    const {isAuthenticated, isAuthenticating, login, authenticationError} = useContext(AuthContext);\r\n    const [state, setState] = useState<LoginState>({});\r\n    const {username, password} = state;\r\n    const handleLogin = () => {\r\n        log('handleLogin...');\r\n        login?.(username, password);\r\n    };\r\n    log('render');\r\n    if (isAuthenticated) {\r\n        return <Redirect to={{pathname: '/'}}/>\r\n    }\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <IonToolbar>\r\n                    <IonTitle>Login</IonTitle>\r\n                </IonToolbar>\r\n            </IonHeader>\r\n            <IonContent>\r\n                <IonInput placeholder=\"username\" value={username} onIonChange={e => setState({\r\n                    ...state,\r\n                    username: e.detail.value || ''\r\n                })}/>\r\n                <IonInput placeholder=\"password\" value={password} onIonChange={e => setState({\r\n                    ...state,\r\n                    password: e.detail.value || ''\r\n                })}/>\r\n                <IonLoading isOpen={isAuthenticating}/>\r\n                {authenticationError && (<div>{authenticationError.message || 'Failed to authenticate'}</div>)}\r\n                <IonButton onClick={handleLogin}>Login</IonButton>\r\n\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n};","import axios from 'axios'\r\nimport {getLogger, baseUrl, withLogs, authConfig} from \"../core\";\r\nimport {GarmentProps} from \"./GarmentProps\";\r\nimport {Plugins} from \"@capacitor/core\";\r\n\r\nconst {Storage} = Plugins;\r\nconst {Network} = Plugins;\r\n\r\nconst garmentUrl = `http://${baseUrl}/api/garments`;\r\n\r\n\r\nexport const getGarments: (token: string) => Promise<GarmentProps[]> = token => {\r\n    return Network.getStatus()\r\n        .then(status => {\r\n            if (status.connected) {\r\n                var res = axios.get(garmentUrl, authConfig(token));\r\n\r\n                res.then(function (res) {\r\n                    res.data.forEach(async (garment: GarmentProps) => {\r\n                        await Storage.set({\r\n                            key: 'token',\r\n                            value: token,\r\n                        });\r\n                        if (garment._id)\r\n                            await Storage.set({\r\n                                key: garment._id,\r\n                                value: JSON.stringify({\r\n                                    id: garment._id,\r\n                                    name: garment.name,\r\n                                    material: garment.material,\r\n                                    inaltime: garment.inaltime,\r\n                                    latime: garment.latime,\r\n                                    descriere: garment.descriere,\r\n                                }),\r\n                            });\r\n                    });\r\n                })\r\n                return withLogs(res, 'getGarments');\r\n            }\r\n            return Storage.get({key: 'user'});\r\n        })\r\n}\r\n\r\nexport const createGarments: (token: string, garment: GarmentProps) => Promise<GarmentProps[]> = (token, garment) => {\r\n    return Network.getStatus()\r\n        .then(status => {\r\n            if (status.connected) {\r\n                var res = axios.post(garmentUrl, garment, authConfig(token));\r\n                res.then(async function (res) {\r\n                    if (garment._id)\r\n                        await Storage.set({\r\n                            key: 'user',\r\n                            value: JSON.stringify({\r\n                                id: garment._id,\r\n                                name: garment.name,\r\n                                material: garment.material,\r\n                                inaltime: garment.inaltime,\r\n                                latime: garment.latime,\r\n                                descriere: garment.descriere,\r\n                            }),\r\n                        });\r\n                });\r\n                return withLogs(res, 'createGarments');\r\n            }\r\n            return Storage.set({\r\n                key: 'user',\r\n                value: JSON.stringify({\r\n                    id: garment._id,\r\n                    name: garment.name,\r\n                    material: garment.material,\r\n                    inaltime: garment.inaltime,\r\n                    latime: garment.latime,\r\n                    descriere: garment.descriere,\r\n                }),\r\n            });\r\n        })\r\n}\r\n\r\nexport const updateGarment: (token: string, garment: GarmentProps) => Promise<GarmentProps[]> = (token, garment) => {\r\n    return Network.getStatus()\r\n        .then(status => {\r\n            if (status.connected) {\r\n                var res = axios.put(`${garmentUrl}/${garment._id}`, garment, authConfig(token));\r\n                res.then(async function (res) {\r\n                    if (garment._id)\r\n                        await Storage.set({\r\n                            key: garment._id,\r\n                            value: JSON.stringify({\r\n                                id: garment._id,\r\n                                name: garment.name,\r\n                                material: garment.material,\r\n                                inaltime: garment.inaltime,\r\n                                latime: garment.latime,\r\n                                descriere: garment.descriere,\r\n                            }),\r\n                        });\r\n                });\r\n                return withLogs(res, 'updateGarment');\r\n            }\r\n            return Storage.set({\r\n                key: 'user',\r\n                value: JSON.stringify({\r\n                    id: garment._id,\r\n                    name: garment.name,\r\n                    material: garment.material,\r\n                    inaltime: garment.inaltime,\r\n                    latime: garment.latime,\r\n                    descriere: garment.descriere,\r\n                }),\r\n            });\r\n        });\r\n}\r\n\r\n\r\ninterface MessageData {\r\n    event: string;\r\n    payload: GarmentProps;\r\n}\r\n\r\nconst log = getLogger('ws');\r\n\r\nexport const newWebSocket = (token: string, onMessage: (data: MessageData) => void) => {\r\n    const ws = new WebSocket(`ws://${baseUrl}`)\r\n    ws.onopen = () => {\r\n        log('web socket onopen');\r\n        ws.send(JSON.stringify({type: 'authorization', payload: {token}}));\r\n    }\r\n    ws.onclose = () => {\r\n        log('web socket onclose');\r\n    };\r\n    ws.onerror = error => {\r\n        log('web socket onerror', error);\r\n    };\r\n    ws.onmessage = messageEvent => {\r\n        log('web socket onmessage');\r\n        const data: MessageData = JSON.parse(messageEvent.data);\r\n        const {event, payload: item} = data;\r\n        if (event === 'created' || event === 'updated') {\r\n            //save\r\n            console.log(\"Ar trebui salvate local\");\r\n        }\r\n        onMessage(data);\r\n    };\r\n    return () => {\r\n        ws.close();\r\n    }\r\n}","import {getLogger} from \"../core\";\r\nimport {GarmentProps} from \"./GarmentProps\";\r\nimport React, {useCallback, useContext, useEffect, useReducer} from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport {createGarments, getGarments, newWebSocket, updateGarment} from \"./GarmentApi\";\r\nimport {AuthContext} from \"../auth\";\r\n\r\nconst FETCH_GARMENTS_STARTED = 'FETCH_GARMENTS_STARTED';\r\nconst FETCH_GARMENTS_SUCCEEDED = 'FETCH_GARMENTS_SUCCEEDED';\r\nconst FETCH_GARMENTS_FAILED = 'FETCH_GARMENTS_FAILED';\r\nconst SAVE_GARMENTS_STARTED = 'SAVE_GARMENTS_STARTED';\r\nconst SAVE_GARMENTS_SUCCEEDED = 'SAVE_GARMENTS_SUCCEEDED';\r\nconst SAVE_GARMENTS_FAILED = 'SAVE_GARMENTS_FAILED';\r\n\r\nconst log = getLogger('GarmentProvider');\r\n\r\ntype SaveGarmentFn = (garment: GarmentProps) => Promise<any>;\r\n\r\nexport interface GarmentState {\r\n    garments?: GarmentProps[],\r\n    fetching: boolean,\r\n    fetchingError?: Error | null,\r\n    saving: boolean,\r\n    savingError?: Error | null,\r\n    saveGarment?: SaveGarmentFn,\r\n}\r\n\r\ninterface ActionProps {\r\n    type: string,\r\n    payload?: any,\r\n}\r\n\r\nconst initialState: GarmentState = {\r\n    fetching: false,\r\n    saving: false,\r\n}\r\n\r\nconst reducer: (state: GarmentState, action: ActionProps) => GarmentState =\r\n    (state, {type, payload}) => {\r\n        switch (type) {\r\n            case FETCH_GARMENTS_STARTED:\r\n                return {...state, fetching: true, fetchingError: null};\r\n            case FETCH_GARMENTS_SUCCEEDED:\r\n                return {...state, garments: payload.garments, fetching: false};\r\n            case FETCH_GARMENTS_FAILED:\r\n                return {...state, fetchingError: payload.error, fetching: false};\r\n            case SAVE_GARMENTS_STARTED:\r\n                return {...state, savingError: null, saving: true};\r\n            case SAVE_GARMENTS_SUCCEEDED:\r\n                const garments = [...(state.garments || [])];\r\n                const garment = payload.garment;\r\n                const index = garments.findIndex((i => i._id === garment._id));\r\n                if (index === -1)\r\n                    garments.splice(0, 0, garment);\r\n                else\r\n                    garments[index] = garment;\r\n\r\n                return {...state, garments, saving: false};\r\n            case SAVE_GARMENTS_FAILED:\r\n                return {...state, savingError: payload.error, saving: false};\r\n            default:\r\n                return state;\r\n        }\r\n    };\r\n\r\nexport const GarmentContext = React.createContext<GarmentState>(initialState);\r\n\r\ninterface GarmentProviderProps {\r\n    children: PropTypes.ReactNodeLike;\r\n}\r\n\r\nexport const GarmentProvider: React.FC<GarmentProviderProps> = ({children}) => {\r\n    const { token } = useContext(AuthContext);\r\n    const [state, dispatch] = useReducer(reducer, initialState);\r\n    const {garments, fetching, fetchingError, saving, savingError} = state;\r\n    useEffect(getGarmentsEffect, [token]);\r\n    useEffect(wsEffect, [token]);\r\n    const saveGarment = useCallback<SaveGarmentFn>(saveGarmentCallback, [token]);\r\n    const value = {garments, fetching, fetchingError, saving, savingError, saveGarment};\r\n    log('returns');\r\n    return (\r\n        <GarmentContext.Provider value={value}>\r\n            {children}\r\n        </GarmentContext.Provider>\r\n    );\r\n\r\n    function getGarmentsEffect() {\r\n        let canceled = false;\r\n        fetchGarments();\r\n        return () => {\r\n            canceled = true;\r\n        }\r\n\r\n\r\n        async function fetchGarments() {\r\n            if(!token?.trim())\r\n                return;\r\n            try {\r\n                log('fetchGarments started');\r\n                dispatch({type: FETCH_GARMENTS_STARTED});\r\n                const garments = await getGarments(token);\r\n                log('fetchingGarments succeede');\r\n                if (!canceled)\r\n                    dispatch({type: FETCH_GARMENTS_SUCCEEDED, payload: {garments}});\r\n            } catch (error) {\r\n                log('fetchGarments failed');\r\n                dispatch({type: FETCH_GARMENTS_FAILED, payload: {error}});\r\n            }\r\n        }\r\n    }\r\n\r\n    async function saveGarmentCallback(garment: GarmentProps) {\r\n        try {\r\n        log('saveGarments started');\r\n        dispatch({type: SAVE_GARMENTS_STARTED});\r\n        const savedGarment = await (garment._id ? updateGarment(token, garment) : createGarments(token, garment));\r\n        log('saveGarments succeeded');\r\n        dispatch({type: SAVE_GARMENTS_SUCCEEDED, payload: {garment: savedGarment}});\r\n        } catch (error) {\r\n            log('saveGarment failed');\r\n            dispatch({type: SAVE_GARMENTS_FAILED, payload: {error}});\r\n        }\r\n    }\r\n\r\n    function wsEffect() {\r\n        let canceled = false;\r\n        log('wsEffect - connecting');\r\n        let closeWebSocket: () => void;\r\n        if(token?.trim()) {\r\n            closeWebSocket = newWebSocket(token, message => {\r\n                if (canceled)\r\n                    return;\r\n                const {event, payload: garment} = message;\r\n                log(`ws msg, garment ${event}`);\r\n                if (event === 'created' || event === 'updated') {\r\n                    dispatch({type: SAVE_GARMENTS_SUCCEEDED, payload: {garment}});\r\n                }\r\n            });\r\n        }\r\n        return () => {\r\n            log('wsEffect - disconnecting');\r\n            canceled = true;\r\n            closeWebSocket?.();\r\n        }\r\n    }\r\n};","import React from 'react';\r\nimport {IonItem, IonLabel} from \"@ionic/react\";\r\nimport {GarmentProps} from \"./GarmentProps\";\r\n\r\ninterface GarmentPropsExt extends GarmentProps {\r\n    onEdit: (_id?: string) => void;\r\n}\r\n\r\nconst Garment: React.FC<GarmentPropsExt> = ({_id, name, material, inaltime, latime, descriere, onEdit}) => {\r\n  return (\r\n      <IonItem onClick={() => onEdit(_id)}>\r\n          <IonLabel>{name}</IonLabel>\r\n      </IonItem>\r\n  );\r\n};\r\n\r\nexport default Garment;","import {useEffect, useState} from 'react';\r\nimport {NetworkStatus, Plugins} from '@capacitor/core';\r\n\r\nconst {Network} = Plugins;\r\n\r\nconst initState = {\r\n    connected: false,\r\n    connectionType: 'unknown',\r\n}\r\n\r\nexport const useNetwork = () => {\r\n    const [networkStatus, setNetworkStatus] = useState(initState)\r\n    useEffect(() => {\r\n        const handler = Network.addListener('networkStatusChange', handleNetStatusChange);\r\n        Network.getStatus().then(handleNetStatusChange);\r\n        let canceled = false;\r\n        return () => {\r\n            canceled = true;\r\n            handler.remove();\r\n        }\r\n\r\n        function handleNetStatusChange(status: NetworkStatus) {\r\n            console.log('useNetwork - status change', status);\r\n            if (!canceled) {\r\n                setNetworkStatus(status);\r\n            }\r\n        }\r\n    }, [])\r\n    return {networkStatus};\r\n}","import { useEffect, useState } from 'react';\r\nimport { AppState, Plugins } from '@capacitor/core';\r\n\r\nconst { App } = Plugins;\r\n\r\nconst initialState = {\r\n    isActive: true,\r\n}\r\n\r\nexport const useAppState = () => {\r\n    const [appState, setAppState] = useState(initialState)\r\n    useEffect(() => {\r\n        const handler = App.addListener('appStateChange', handleAppStateChange);\r\n        App.getState().then(handleAppStateChange);\r\n        let canceled = false;\r\n        return () => {\r\n            canceled = true;\r\n            handler.remove();\r\n        }\r\n\r\n        function handleAppStateChange(state: AppState) {\r\n            console.log('useAppState - state change', state);\r\n            if (!canceled) {\r\n                setAppState(state);\r\n            }\r\n        }\r\n    }, [])\r\n    return { appState };\r\n};","import React, {useContext, useEffect, useState} from 'react';\r\nimport {Redirect, RouteComponentProps} from 'react-router';\r\nimport {\r\n    IonButton,\r\n    IonContent,\r\n    IonFab,\r\n    IonFabButton,\r\n    IonHeader,\r\n    IonIcon, IonInfiniteScroll, IonInfiniteScrollContent,\r\n    IonList, IonLoading,\r\n    IonPage, IonSelect, IonSelectOption,\r\n    IonTitle,\r\n    IonToolbar\r\n} from '@ionic/react';\r\nimport {add, shirt} from 'ionicons/icons';\r\nimport {getLogger} from '../core';\r\nimport {GarmentContext} from \"./GarmentProvider\";\r\nimport Garment from './Garment'\r\nimport {AuthContext} from \"../auth\";\r\nimport {GarmentProps} from \"./GarmentProps\";\r\nimport {useNetwork} from \"../core/UseNetState\";\r\nimport {useAppState} from \"../core/UseAppStatus\";\r\n\r\nconst log = getLogger('GarmentList');\r\n\r\nconst GarmentList: React.FC<RouteComponentProps> = ({history}) => {\r\n    const {garments, fetching, fetchingError} = useContext(GarmentContext);\r\n    const [disableInfiniteScroll, setDisableInfiniteScroll] = useState<boolean>(false);\r\n    const [displayed, setDisplayed] = useState<GarmentProps[]>([]);\r\n    const [filter, setFilter] = useState<string | undefined>(undefined);\r\n    const [position, setPosition] = useState(8);\r\n    const { logout } = useContext(AuthContext);\r\n    const { networkStatus } = useNetwork();\r\n    const { appState } = useAppState();\r\n\r\n    let color, msg;\r\n    if(networkStatus.connected) {\r\n        color = 'primary';\r\n        msg = 'online';\r\n    }\r\n    else {\r\n        color = 'dark';\r\n        msg = 'offline';\r\n    }\r\n\r\n    useEffect(() => {\r\n        if(garments?.length)\r\n            setDisplayed(garments?.slice(0, 8));\r\n    }, [garments]);\r\n\r\n    useEffect(() => {\r\n        if(garments && filter) {\r\n            console.log(filter);\r\n            if(filter !== \"undefined\")\r\n                setDisplayed(garments.filter(obj => obj.material === filter));\r\n            else\r\n                // setDisplayed(garments);\r\n                setDisplayed(garments?.slice(0, 6));\r\n        }\r\n    // }, [filter, displayed]);\r\n    }, [filter]);\r\n    log('render');\r\n\r\n    async function searchNext($event: CustomEvent<void>) {\r\n        if(garments && position < garments.length) {\r\n            if(filter)\r\n                console.log(filter);\r\n            setDisplayed([...displayed, ...garments.slice(position, position + 3)]);\r\n            setPosition(position + 3);\r\n            console.log(position);\r\n        } else {\r\n            setDisableInfiniteScroll(true);\r\n        }\r\n        ($event.target as HTMLIonInfiniteScrollElement).complete();\r\n    }\r\n\r\n    const handleLogout = () => {\r\n        logout?.();\r\n        return <Redirect to={{ pathname: \"/login\" }} />;\r\n    }\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <IonToolbar>\r\n                    <IonTitle>My Tailor App</IonTitle>\r\n\r\n                    <IonButton className=\"logout-button\" onClick={handleLogout} slot=\"end\" expand=\"block\" fill=\"solid\" color=\"primary\">\r\n                        Logout\r\n                    </IonButton>\r\n                </IonToolbar>\r\n                <IonToolbar color={color}>\r\n                    <IonTitle>Network connection: {msg}</IonTitle>\r\n\r\n                </IonToolbar>\r\n            </IonHeader>\r\n            <IonContent>\r\n                <div>App state is {JSON.stringify(appState)}</div>\r\n                <IonLoading isOpen={fetching} message={\"Fetching garments\"}/>\r\n                <IonSelect value={filter} placeholder=\"Select Material\" onIonChange={e => {\r\n                        setFilter(e.detail.value);\r\n                    //filterGarment(e.detail.value);\r\n                }}>\r\n                    {/*{materials.map(material => <IonSelectOption key={material} value={material}>{material}</IonSelectOption>)}*/}\r\n                    <IonSelectOption value=\"matase\" >matase</IonSelectOption>\r\n                    <IonSelectOption value=\"triplu voal\" >triplu voal</IonSelectOption>\r\n                    <IonSelectOption value=\"undefined\" >no filter</IonSelectOption>\r\n                </IonSelect>\r\n                <IonList>\r\n                    {displayed && displayed.map(({_id, name, material, inaltime, latime, descriere}) =>{\r\n                        return (\r\n                            <Garment key={_id} _id={_id} name={name} material={material} inaltime={inaltime}\r\n                                     latime={latime} descriere={descriere}\r\n                                     onEdit={id => history.push(`/garment/${id}`)}/>\r\n                        );\r\n                    })}\r\n                </IonList>\r\n                <IonInfiniteScroll\r\n                    threshold=\"15px\"\r\n                    disabled={disableInfiniteScroll}\r\n                    onIonInfinite={(e: CustomEvent<void>) => {\r\n                        searchNext(e);\r\n                    }}>\r\n                    <IonInfiniteScrollContent loadingText=\"Loading more gament iteams...\"/>\r\n                </IonInfiniteScroll>\r\n                {fetchingError && (<div>{fetchingError.message || 'Failed to fetch garments'}</div>)}\r\n                <IonFab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\r\n                    <IonFabButton onClick={() => history.push('/garment')}>\r\n                        <IonIcon icon={add}/>\r\n                    </IonFabButton>\r\n                    <IonFabButton onClick={() => history.push('/tab2')}>\r\n                        <IonIcon icon={shirt}/>\r\n                    </IonFabButton>\r\n                </IonFab>\r\n\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n};\r\n\r\nexport default GarmentList;","import React, {useContext, useEffect, useState} from \"react\";\r\nimport {getLogger} from '../core';\r\nimport {RouteComponentProps} from 'react-router';\r\nimport {\r\n    IonButton,\r\n    IonButtons,\r\n    IonContent,\r\n    IonHeader,\r\n    IonInput, IonItem, IonLabel,\r\n    IonLoading,\r\n    IonPage,\r\n    IonTitle,\r\n    IonToolbar,\r\n} from '@ionic/react';\r\nimport {GarmentContext} from \"./GarmentProvider\";\r\nimport {GarmentProps} from \"./GarmentProps\";\r\n\r\nconst log = getLogger('GarmentEdit');\r\n\r\ninterface GarmentEditProps extends RouteComponentProps<{\r\n    id?: string;\r\n}> {}\r\n\r\nconst GarmentEdit: React.FC<GarmentEditProps> = ({ history, match }) => {\r\n    const {garments, saving, savingError, saveGarment} = useContext(GarmentContext);\r\n    const [name, setText] = useState('');\r\n    const [material, setMaterial] = useState('');\r\n    const [inaltime, setInaltime] = useState('');\r\n    const [latime, setLatime] = useState('');\r\n    const [descriere, setDescriere] = useState('');\r\n    const [garment, setGarment] = useState<GarmentProps>();\r\n\r\n    useEffect(() => {\r\n        log('useEffect');\r\n        const routeId = match.params.id || '';\r\n        const garment = garments?.find(i => i._id === routeId);\r\n        setGarment(garment);\r\n        if (garment) {\r\n            setText(garment.name);\r\n            setMaterial(garment.material);\r\n            setInaltime(garment.inaltime);\r\n            setLatime(garment.latime);\r\n            setDescriere(garment.descriere);\r\n        }\r\n    }, [match.params.id, garments]);\r\n\r\n    const handleSave = () => {\r\n        const editedGer = garment ? {...garment, name, material, inaltime, latime, descriere} : {name, material, inaltime, latime, descriere};\r\n        saveGarment && saveGarment(editedGer).then(() => history.goBack());\r\n    };\r\n    log('render');\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <IonToolbar>\r\n                    <IonTitle>SAVE MEEE</IonTitle>\r\n                    <IonButtons slot=\"end\">\r\n                        <IonButton onClick={handleSave}> SAVE ME BABEEE </IonButton>\r\n                    </IonButtons>\r\n                </IonToolbar>\r\n            </IonHeader>\r\n            <IonContent>\r\n                <IonItem className=\"ion-text-wrap\">\r\n                    <IonLabel className=\"labels\">Nume item vestimentar</IonLabel>\r\n                    <IonInput class=\"inputs\" placeholder=\"Nume\" value={name} onIonChange={e => setText(e.detail.value || '')}/>\r\n                </IonItem>\r\n                <IonItem className=\"ion-text-wrap\">\r\n                    <IonLabel className=\"labels\">Material</IonLabel>\r\n                    <IonInput class=\"inputs\" placeholder=\"Material\" value={material} onIonChange={e => setMaterial(e.detail.value || '')}/>\r\n                </IonItem>\r\n                <IonItem className=\"ion-text-wrap\">\r\n                    <IonLabel className=\"labels\">Inaltime</IonLabel>\r\n                    <IonInput class=\"inputs\" placeholder=\"Inaltime\" value={inaltime} onIonChange={e => setInaltime(e.detail.value || '')}/>\r\n                </IonItem>\r\n                <IonItem className=\"ion-text-wrap\">\r\n                    <IonLabel className=\"labels\">Latime</IonLabel>\r\n                    <IonInput class=\"inputs\" placeholder=\"Latime\" value={latime} onIonChange={e => setLatime(e.detail.value || '')}/>\r\n                </IonItem>\r\n                <IonItem className=\"ion-text-wrap\">\r\n                    <IonLabel className=\"labels\">Descriere</IonLabel>\r\n                    <IonInput class=\"inputs\" placeholder=\"Descriere\" value={descriere} onIonChange={e => setDescriere(e.detail.value || '')}/>\r\n                </IonItem>\r\n                <IonLoading isOpen={saving}/>\r\n                {savingError && (\r\n                    <div>{savingError.message || 'Failed to save this garment...'}</div>\r\n                )}\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n};\r\nexport default GarmentEdit;","import {\r\n    IonContent, IonFab, IonFabButton,\r\n    IonHeader, IonIcon,\r\n    IonList,\r\n    IonPage, IonSearchbar,\r\n    IonTitle,\r\n    IonToolbar,\r\n} from '@ionic/react';\r\nimport React, {useContext, useEffect, useState} from 'react';\r\nimport {GarmentContext} from \"../todo/GarmentProvider\";\r\nimport {GarmentProps} from \"../todo/GarmentProps\";\r\nimport {RouteComponentProps} from \"react-router\";\r\nimport Garment from \"../todo/Garment\";\r\nimport {arrowBack} from \"ionicons/icons\";\r\n\r\n\r\nconst Tab2: React.FC<RouteComponentProps> = ({history}) => {\r\n    const {garments, fetchingError} = useContext(GarmentContext);\r\n    const [displayed, setDisplayed] = useState<GarmentProps[]>([]);\r\n    const [searchName, setSearchName] = useState<string>('');\r\n\r\n    useEffect(() => {\r\n        if (garments?.length) {\r\n            setDisplayed(garments.filter(obj => obj.name.indexOf(searchName) >= 0));\r\n        }\r\n    }, [searchName]);\r\n\r\n\r\n    return (\r\n        <IonPage>\r\n            <IonHeader>\r\n                <IonToolbar>\r\n                    <IonTitle>My Tailor App</IonTitle>\r\n                </IonToolbar>\r\n            </IonHeader>\r\n            <IonContent fullscreen>\r\n                <IonSearchbar\r\n                    value={searchName}\r\n                    debounce={300}\r\n                    onIonChange={e => setSearchName(e.detail.value!)\r\n                    }>\r\n                </IonSearchbar>\r\n                <IonList>\r\n                    {displayed.map(({_id, name, material, inaltime, latime, descriere}) => {\r\n                        return (\r\n                            <Garment key={_id} _id={_id} name={name} material={material} inaltime={inaltime}\r\n                                     latime={latime} descriere={descriere} onEdit={id => {}}/>\r\n                        );\r\n                    })}\r\n                </IonList>\r\n\r\n                {fetchingError && (<div>{fetchingError.message || 'Failed to fetch garments'}</div>)}\r\n                <IonFab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\r\n                    <IonFabButton onClick={() => history.push('/garments')}>\r\n                        <IonIcon icon={arrowBack}/>\r\n                    </IonFabButton>\r\n                </IonFab>\r\n            </IonContent>\r\n        </IonPage>\r\n    );\r\n}\r\n\r\nexport default Tab2;\r\n","import React from 'react';\r\nimport {Redirect, Route} from 'react-router-dom';\r\nimport {IonApp, IonRouterOutlet} from '@ionic/react';\r\nimport {IonReactRouter} from '@ionic/react-router';\r\n\r\n/* Core CSS required for Ionic components to work properly */\r\nimport '@ionic/react/css/core.css';\r\n\r\n/* Basic CSS for apps built with Ionic */\r\nimport '@ionic/react/css/normalize.css';\r\nimport '@ionic/react/css/structure.css';\r\nimport '@ionic/react/css/typography.css';\r\n\r\n/* Optional CSS utils that can be commented out */\r\nimport '@ionic/react/css/padding.css';\r\nimport '@ionic/react/css/float-elements.css';\r\nimport '@ionic/react/css/text-alignment.css';\r\nimport '@ionic/react/css/text-transformation.css';\r\nimport '@ionic/react/css/flex-utils.css';\r\nimport '@ionic/react/css/display.css';\r\n\r\n/* Theme variables */\r\nimport './theme/variables.css';\r\nimport {AuthProvider, Login, PrivateRoute} from \"./auth\";\r\nimport {GarmentProvider} from \"./todo/GarmentProvider\";\r\nimport {GarmentEdit, GarmentList} from \"./todo\";\r\nimport Tab2 from \"./pages/Tab2\";\r\n\r\nconst App: React.FC = () => (\r\n    <IonApp>\r\n        <IonReactRouter>\r\n            <IonRouterOutlet>\r\n                <AuthProvider>\r\n                    <Route path=\"/login\" component={Login} exact={true}/>\r\n                    <GarmentProvider>\r\n                        <PrivateRoute component={GarmentList} path=\"/garments\" exact={true}/>\r\n                        <PrivateRoute component={GarmentEdit} path=\"/garment\" exact={true}/>\r\n                        <PrivateRoute component={GarmentEdit} path=\"/garment/:id\" exact={true}/>\r\n                        <PrivateRoute component={Tab2} path=\"/tab2\" exact={true}/>\r\n                    </GarmentProvider>\r\n                    <Route exact path=\"/\" render={() => <Redirect to=\"/garments\"/>}/>\r\n                </AuthProvider>\r\n            </IonRouterOutlet>\r\n        </IonReactRouter>\r\n    </IonApp>\r\n);\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t111,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t112,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t113,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t114,\n\t\t17\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t115,\n\t\t18\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t116,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t117,\n\t\t19\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t118,\n\t\t20\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t119,\n\t\t21\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t120,\n\t\t22\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t121,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t122,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t123,\n\t\t23\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t124,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t125,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t126,\n\t\t24\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t127,\n\t\t25\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t128,\n\t\t26\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t129,\n\t\t27\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t130,\n\t\t28\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t131,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t132,\n\t\t14\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t133,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t134,\n\t\t29\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t135,\n\t\t30\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t136,\n\t\t31\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t137,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t138,\n\t\t16\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t139,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t140,\n\t\t32\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t141,\n\t\t33\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t142,\n\t\t34\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t143,\n\t\t35\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t144,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t145,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t146,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t147,\n\t\t36\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t148,\n\t\t15\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t149,\n\t\t37\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t150,\n\t\t38\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t151,\n\t\t39\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t152,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t153,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 75;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t155,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 77;\nmodule.exports = webpackAsyncContext;"],"sourceRoot":""}